@using HeulenderWolf.Components.Molecules
@using HeulenderWolf.Models

<!--
==============================
SECTION: FAQ
==============================
-->
<section class="faq-section">
    <div class="faq-container">

        <!-- Títulos -->
        <h4 class="faq-subtitle">FAQ</h4>
        <h2 class="faq-title">Ainda Com Dúvidas?</h2>

        <!-- ===========================
             BLOCO DE PERGUNTAS (Accordion)
             =========================== -->
        <div class="faq-content">
            <div class="accordion" id="faqAccordion">

                @foreach (var item in FAQItems)
                {
                    <HWAccordionItem Item="@item" 
                                     AccordionId="faqAccordion"
                                     CorFundo="@Configuracao.CorFundo"
                                     CorTexto="@Configuracao.CorTexto"
                                     OnToggle="OnToggleItem" />
                }

            </div>
        </div>

        <!-- ===========================
             BOTÃO DE AÇÃO
             =========================== -->
        <button class="cta-button">Comprar Filhote Shih-Tzu</button>
    </div>

    <!-- ===========================
         IMAGENS DECORATIVAS
         =========================== -->
    <img src="img/cachorro1.png" alt="Cachorro esquerdo" class="faq-dog dog-left">
    <img src="img/cachorro2.png" alt="Cachorro direito" class="faq-dog dog-right">
    <HWButtonIcon OnClickEvent="@ShowModal" />
</section>

<!-- Modal para Configurações Globais (Cores e Gerenciamento) -->
<HWFormModal @ref="FormModalConfig"
             TItem="FAQConfiguracao"
             TituloHeader="Configurações do FAQ"
             OnSalvarEvent="@OnSalvarConfiguracao"
             Context="config">
    <div class="row g-3">

        <!-- Seção de Gerenciamento -->
        <div class="col-12 mt-4">
            <div class="d-flex justify-content-between align-items-center mb-3">
                <h5 class="text-primary mb-0">Gerenciar Perguntas</h5>
                <button type="button" 
                        class="btn btn-success btn-sm" 
                        @onclick="AdicionarNovo">
                    <i class="bi bi-plus-circle"></i> Adicionar Nova
                </button>
            </div>
            <div class="faq-list">
                @foreach (var item in FAQItems.OrderBy(f => f.Ordem))
                {
                    <div class="faq-item-card">
                        <div class="faq-item-content">
                            <span class="faq-order">@item.Ordem</span>
                            <span class="faq-question">@item.Pergunta</span>
                        </div>
                        <div class="faq-item-actions">
                            <button type="button" 
                                    class="btn btn-sm btn-outline-primary" 
                                    @onclick="() => MoverParaCima(item)"
                                    disabled="@(FAQItems.IndexOf(item) == 0)"
                                    title="Mover para cima">
                                <i class="bi bi-arrow-up"></i>
                            </button>
                            <button type="button" 
                                    class="btn btn-sm btn-outline-primary" 
                                    @onclick="() => MoverParaBaixo(item)"
                                    disabled="@(FAQItems.IndexOf(item) == FAQItems.Count - 1)"
                                    title="Mover para baixo">
                                <i class="bi bi-arrow-down"></i>
                            </button>
                            <button type="button" 
                                    class="btn btn-sm btn-outline-warning" 
                                    @onclick="() => EditarFAQ(item)"
                                    title="Editar">
                                <i class="bi bi-pencil"></i>
                            </button>
                            <button type="button" 
                                    class="btn btn-sm btn-outline-danger" 
                                    @onclick="() => ExcluirFAQ(item)"
                                    title="Excluir">
                                <i class="bi bi-trash"></i>
                            </button>
                        </div>
                    </div>
                }
            </div>
        </div>
   
        <!-- Seção de Cores -->
        <div class="col-12">
            <h5 class="text-primary mb-3">Personalização de Cores</h5>
        </div>

        <HWInputColor @bind-Value="config.CorFundo"
                      Grid="6"
                      ForId="corFundoGlobal"
                      Label="Cor de Fundo (Todos os Itens)" />

        <HWInputColor @bind-Value="config.CorTexto"
                      Grid="6"
                      ForId="corTextoGlobal"
                      Label="Cor do Texto (Todos os Itens)" />
    </div>
</HWFormModal>

<!-- Modal para Adicionar/Editar Item Individual -->
<HWFormModal @ref="FormModalItem"
             TItem="FAQItem"
             TituloHeader="@(IsEditMode ? "Editar Pergunta" : "Adicionar Nova Pergunta")"
             OnSalvarEvent="@OnSalvarFAQ"
             Context="item">
    <div class="row g-3">
        <HWInputText @bind-Value="item.Pergunta"
                     Grid="12"
                     ForId="pergunta"
                     Label="Pergunta"
                     Placeholder="Digite a pergunta"
                     MaxLength="500"
                     Required="true" />

        <HWInputTextArea @bind-Value="item.Resposta"
                         Grid="12"
                         ForId="resposta"
                         Label="Resposta"
                         Placeholder="Digite a resposta"
                         MaxLength="2000"
                         Rows="5"
                         Required="true" />
    </div>
</HWFormModal>


